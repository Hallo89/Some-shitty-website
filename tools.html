<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>lol</title>
    <link rel="stylesheet" type="text/css" href="global.css">
    <style>
      body {
        margin: 10px;
      }
      .box {
        font-size: 22px;
        display: inline-block;
        vertical-align: top;
      }
      .box .box_header {
        font-size: 1.1em;
      }
      .function {
        font-size: .75em;
        color: hsl(0, 0%, 75%);
        padding: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        border-radius: 2px;
      }
      #function_1 span {
        margin: 13px 6px;
        border-bottom: 2px solid rgba(229, 255, 164, .1);
        padding: 3px;
      }
      .input_container {
        display: flex;
        justify-content: flex-start;
        padding: 5px 5px 7px;
        background-color: hsl(0, 0%, 14%);
      }
      .input_box {
        font-size: .78em;
        margin: 0 7px 3px;
        display: flex;
        flex-direction: column;
        min-width: 150px;
        padding: 8px;
      }
      .input {
        border: none;
        box-shadow: 0 1px 7px hsla(0, 0%, 14%, .82);
        background: hsl(0, 0%, 23%);
        color: hsl(0, 0%, 77%);
        border-radius: 2px;
        padding: 3px 6px;
        height: 17px;
        width: auto;
      }
      .input_box .input_header {
        margin-bottom: 3px;
        color: hsl(0, 0%, 70%);
      }
      .button {
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
        justify-content: center;
        align-items: center;
      }
      .knobber {
        position: relative;
        cursor: pointer;
      }
      .knobber .knob {
        content: '';
        position: absolute;
        left: 6px;
        height: 17px;
        width: 17px;
        box-shadow: 0 1px 5px hsla(0, 0%, 22%, .8);
        border-radius: 100%;
        transition: .3s;
      }
      .togglebutton .knob {
        background-color: rgba(255, 94, 75, 0.3);
      }
      .togglebutton.appending .knob {
        transform: translate(122px);
        background-color: rgba(92, 255, 142, 0.2);
      }
      .slider {
        padding: 3px 12px;
      }
      .slider .knob {
        background-color: hsl(0, 0%, 13%);
        left: 4.5px;
        transition: none;
      }
      .slider.rotate {
        width: 360px;
      }

      .box_content {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 450px;
        height: 450px;
      }
      #function_2 {
        transform-style: preserve-3d;
        transform: rotate3d(1, 1, 1, 94deg);
      }
      .face {
        width: 100px;
        height: 100px;
        position: absolute;
        outline: 1px solid transparent;
      }
      .front {
        transform: translateZ(50px);
        background-color: cyan;
      }
      .behind {
        transform: rotateY(180deg) translateZ(50px);
        background-color: deepskyblue;
      }
      .left {
        transform: rotateY(90deg) translateZ(50px);
        background-color: darkseagreen;
      }
      .right {
        transform: rotateY(-90deg) translateZ(50px);
        background-color: firebrick;
      }
      .bottom {
        transform: rotateX(90deg) translateZ(50px);
        background-color: chocolate;
      }
      .top {
        transform: rotateX(-90deg) translateZ(50px);
        background-color: azure;
      }
    </style>
  </head>
  <body>
    <div id="containers">

      <div class="box glb_box">
        <div class="corneranimation">
          <span class="corner_before"></span>
          <span class="corner_after"></span>
        </div>
        <div class="box_header">
          <span class="header_text">Random figure generator</span>
        </div>
        <div class="input_container">
          <div class="input_box">
            <span class="input_header"># random numbers</span>
            <input type="number" class="input" id="figures_amount">
          </div>
          <div class="input_box">
            <span class="input_header"># after comma</span>
            <input type="number" class="input" id="figures_aftercomma">
          </div>
          <div class="input_box">
            <span class="input_header">Start value</span>
            <input type="number" class="input" id="figures_start">
          </div>
          <div class="input_box">
            <span class="input_header">End value</span>
            <input type="number" class="input" id="figures_end">
          </div>
          <div class="input_box">
            <span class="input_header">Append mode</span>
            <span class="input togglebutton knobber figures"  id="figures_append" onclick="toggleRandomMode()">
              <span class="knob"></span>
            </span>
          </div>
          <div class="input_box button" onclick="randomNumber()">
            <span class="input_header">Go!</span>
          </div>
        </div>
        <div class="function" id="function_1"></div>
      </div>

      <div class="box glb_box">
        <div class="corneranimation">
          <span class="corner_before"></span>
          <span class="corner_after"></span>
        </div>
        <div class="box_header">
          <span class="header_text">3D Magic</span>
        </div>
        <div class="input_container">
          <div class="input_box">
            <span class="input_header">Rotate Magic</span>
            <span class="input slider rotate knobber" id="cubes_rotate_slider">
              <span class="knob" id="rotate_slider_knob"></span>
            </span>
          </div>
        </div>
        <div class="box_content">
          <div class="function" id="function_2">
            <span class="face front"></span>
            <span class="face behind"></span>
            <span class="face top"></span>
            <span class="face bottom"></span>
            <span class="face left"></span>
            <span class="face right"></span>
          </div>
        </div>
      </div>

    </div>
    <script>
      var randomNumbers = "";
      var mouseState = 0;
      const amount = document.getElementById('figures_amount');
      const start = document.getElementById('figures_start');
      const end = document.getElementById('figures_end');
      const aftercomma = document.getElementById('figures_aftercomma');
      const appendButton = document.getElementById('figures_append');
      const rotateSlider = document.getElementById('cubes_rotate_slider');
      const rotateSliderKnob = document.getElementById('rotate_slider_knob');
      const figuresOutput = document.getElementById('function_1');
      const cubesOutput = document.getElementById('function_2');
      const masterContainer = document.getElementById('containers');
      window.addEventListener('mousedown', down);
      window.addEventListener('mouseup', up);
      rotateSlider.addEventListener('mousemove', movingRotateSlider);
      rotateSlider.addEventListener('mousedown', rotateSliderClick);
      function down() {
        mouseState++;
      }
      function up() {
        mouseState--;
      }
      function randomNumber() {
        let valueAmount = parseInt(amount.value);
        let valueStart = parseInt(start.value);
        let valueEnd = parseInt(end.value);
        let valueAftercomma = parseInt(aftercomma.value);
        let valueLength = valueEnd - valueStart;
        if (!appendButton.classList.contains('appending')) {
          randomNumbers = "";
          figuresOutput.innerHTML = '';
        }
        for (var i = 0; i < valueAmount; i++) {
          randomNumbers += '<span>' + (valueLength*Math.random() + valueStart).toFixed(valueAftercomma) + '</span>';
        }
        figuresOutput.innerHTML = randomNumbers;
        masterContainer.children[0].classList.add('active');
      }
      function toggleRandomMode() {
        appendButton.classList.toggle('appending');
      }
      function movingRotateSlider(e) {
        const rect = this.getBoundingClientRect();
        console.log(mouseState);
        if (mouseState) {
          let range = e.x - rect.left - 10;
          if (range > 0 && range < 360) {
            cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
            rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
          }
          else if (range < 0) {
            range = 0;
            cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
            rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
          }
          else if (range > 360) {
            range = 360;
            cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
            rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
          }
        }
      }
      function rotateSliderClick(e) {
        const rect = this.getBoundingClientRect();
        console.log(mouseState);
        let range = e.x - rect.left - 10;
        if (range > 0 && range < 360) {
          cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
          rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
        }
        else if (range < 0) {
          range = 0;
          cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
          rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
        }
        else if (range > 360) {
          range = 360;
          cubesOutput.style.transform = 'rotate3d(1, 1, 1, ' + range + 'deg)';
          rotateSliderKnob.style.transform = 'translateX(' + range + 'px)'
        }
      }
    </script>
  </body>
</html>
