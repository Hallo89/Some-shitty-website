<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Nesewebel's tutorials</title>
    <link rel="stylesheet" type="text/css" href="global.css">
    <link rel="stylesheet" type="text/css" href="tutorialsmain.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300|Overpass+Mono:400,600">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.3/css/all.css"> <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/fontawesome.css">
  </head>
  <body>

    <div id="headline" class="headline">
      <a href="https://hallo89.github.io/Some-shitty-website/" id="head_image"></a>
      <nav id="head_nav">
        <a href="https://nesewebel.de/auch" target="_blank">Nese1</a>
        <a href="https://nesewebel.de/mockbob" target="_blank">Nese2</a>
        <a href="https://twitter.com/Nesewebel" target="_blank">Nese3</a>
        <a href="https://steamcommunity.com/id/Nesewebel" target="_blank">Nese4</a>
      </nav>
      <div id="expanding_border"></div>
      <div id="modes" class="modes">
        <span class="mode_gear fa fa-cog" id="mode_gear" onclick="toggleDropdown()"></span>
        <div id="mode_dropdown" class="mode_dropdown">
          <div onclick="toggleMode()" class="mode_switch" id="switch_daynight">
            Day/Night Theme
          </div>
          <div onclick="toggleModeNesewebel()" class="mode_switch" id="switch_nesewebel">
            Nesewebel Theme
          </div>
        </div>
      </div>
    </div>
    <div id="headline_popout" onclick="toggleHeadline()">
      <span class="face left front"></span>
      <span class="face left behind"></span>
      <span class="face left side_back"></span>
      <span class="face left side_front"></span>
      <span class="face left side_end"></span>
      <span class="face right front"></span>
      <span class="face right behind"></span>
      <span class="face right side_back"></span>
      <span class="face right side_front"></span>
      <span class="face right side_end"></span>
    </div>

    <header id="tutorial_header">
      <div class="header_navigation">
        <span class="header_nav_part root">assets</span><span class="header_nav_part slash">/</span><span class="header_nav_part mod">minecraft</span><span class="header_nav_part slash">/</span><span class="header_nav_part child_1">blockstates</span><span class="header_nav_part slash">/</span><span class="header_nav_part file">dirt.json</span>
      </div>
    </header>

    <div id="headline_tutorials" class="tutorial_nav headline">
      <div class="aside_container models" onclick="toggleNavModels()" id="tutoheadline_models">
        <span>Models</span>
        <div class="nested_items models">
          <span>Introduction</span>
          <span>Models-item1</span>
          <span>Models-item2</span>
        </div>
      </div>
      <div class="aside_container blockstates" onclick="toggleNavBlockstates()" id="tutoheadline_blockstates">
        <span>Blockstates</span>
        <div class="nested_items blockstates">
          <span>Introduction</span>
          <span>Randomized Blockstates</span>
          <span>Blockstates-item2</span>
        </div>
      </div>
    </div>

    <div id="main">
      <aside class="tutorial_nav">
        <div class="aside_container models">
          <span>Models</span>
          <div class="nested_items models">
            <span>Introduction</span>
            <span>Models-item1</span>
            <span>Models-item2</span>
          </div>
        </div>
        <div class="aside_container blockstates">
          <span>Blockstates</span>
          <div class="nested_items blockstates">
            <span>Introduction</span>
            <span>Randomized Blockstates</span>
            <span>Blockstates-item2</span>
          </div>
        </div>
      </aside>
      <div id="main_content">

      </div>
    </div>
    <script>
      window.onload = function preload() {
        pathCollapseOnload();
        pathCollapseOnload();
      };
      window.addEventListener('resize', pathCollapse);
      var ifLock = true;
      var ifLock2 = true;
      var ifLockOnload = true;
      var ifLock2Onload = true;
      var overflowLock = true;
      var overflowLock2 = true;
      var onloadLock = true;
      var secondIteration = false;
      var secondIterationOnload = false;
      var overflowWidth1;
      var overflowWidth2;
      const header = document.querySelector('header#tutorial_header');
      const path = document.querySelector('.header_navigation');
      const pathPart1 = document.querySelector('.header_nav_part.mod');
      const pathPart2 = document.querySelector('.header_nav_part.child_1');
      const contentPart1 = pathPart1.innerHTML;
      const contentPart2 = pathPart2.innerHTML;
      const lengthPart1 = pathPart1.innerHTML.length;
      const lengthPart2 = pathPart2.innerHTML.length;
      const collapsedFiller = "...";
      const overflowBuffer = 12;
      const overflowBufferOnload = 65;
      function pathCollapse() {
      //If none of the to-collapse parts is longer than 3 characters, remove the whole event listener
        let headerTotalWidth = header.scrollWidth;
        let headerCurrentWidth = header.clientWidth;
        if (lengthPart1 <= 3 && lengthPart2 <= 3) {
          window.removeEventListener('resize', pathCollapse);
          return;
        }
        else {
          //second iteration. Positioned before the first one because it would be unlocked before the overflow has been calculated anew
          //needs to be over 3 characters long
          if (lengthPart2 > 3 && secondIteration == true) {
            //Once an overflow has been reached, save its width and never change it again until the next javascript load (which is page load)
            //May be the slightest bit off if one drags the window with highspeed (that is, extremely high speed)
            if (headerCurrentWidth != headerTotalWidth && overflowLock2 == true) {
              overflowWidth2 = (headerTotalWidth + overflowBuffer);
              overflowLock2 = false;
            }
            //If an overflow happens, change the innerHTML of the specific element to three dots (= collapsedFiller)
            if (headerCurrentWidth <= overflowWidth2 && ifLock2 == true) {
              pathPart2.innerHTML = collapsedFiller;
              ifLock2 = false
            }
            //Once the overflow-width has been reached again, change the element back to how it was before, which is written in contentPart[x]
            if (headerCurrentWidth > overflowWidth2 && ifLock2 == false) {
              pathPart2.innerHTML = contentPart2;
              ifLock2 = true;
            }
          }
        //first iteration
          if (lengthPart1 > 3) {
            if (headerCurrentWidth != headerTotalWidth && overflowLock == true) {
              overflowWidth1 = (headerTotalWidth + overflowBuffer);
              overflowLock = false;
            }
            if (headerCurrentWidth <= overflowWidth1 && ifLock == true) {
              pathPart1.innerHTML = collapsedFiller;
              secondIteration = true;
              ifLock = false
            }
            if (headerCurrentWidth > overflowWidth1 && ifLock == false) {
              pathPart1.innerHTML = contentPart1;
              secondIteration = false;
              ifLock = true;
            }
          }
          else {
            secondIteration = true;
            return;
          }
        }
      }
      function pathCollapseOnload() {
        let headerTotalWidth = header.scrollWidth;
        let headerCurrentWidth = header.clientWidth;
        if (lengthPart1 <= 3 && lengthPart2 <= 3 || headerCurrentWidth == headerTotalWidth) {
          return;
        }
        else {
          if (lengthPart2 > 3 && secondIterationOnload == true && ifLock2Onload == true) {
            pathPart2.innerHTML = collapsedFiller;
            overflowWidth2 = (headerTotalWidth + overflowBufferOnload);
            ifLock2Onload = false
          }
          if (lengthPart1 > 3 && ifLockOnload == true) {
            pathPart1.innerHTML = collapsedFiller;
            overflowWidth1 = (headerTotalWidth + overflowBufferOnload);
            secondIterationOnload = true;
            ifLockOnload = false
          }
          else {
            secondIterationOnload = true;
          }
        }
      }
      function toggleNavModels() {
        document.getElementById('tutoheadline_models').classList.toggle('enabled');
      }
      function toggleNavBlockstates() {
        document.getElementById('tutoheadline_blockstates').classList.toggle('enabled');
      }
    </script>
    <script src="global.js"></script>
  </body>
</html>
